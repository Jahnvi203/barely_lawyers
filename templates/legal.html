<!DOCTYPE html>
<html>
<head>
	<title>Legal Advice System</title>
	<!-- Include required CSS files -->
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<body>
	<!-- Create a container for the web page -->
	<div class="container mt-5">
		<!-- Create a form to take in legal issues -->
		<form id="legal-issue-form" class="form-group">
			<label for="legal-issue">Enter your Case Facts:</label>
			<input type="text" id="legal-issue" name="legal-issue" class="form-control">
			<br>
			<!-- Create a button to submit the form -->
			<button type="submit" class="btn btn-primary">Get advice</button>
		</form>
		<!-- Create a container for displaying the advice -->
		<div id="advice-container" class="mt-3">
			<!-- Advice will be displayed here -->
		</div>
	</div>

	<!-- Include required JS files -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

	<script>
    $(function() {
        // Intercept the form submission event
        $('#legal-issue-form').submit(function(event) {
            // Prevent the default form submission behavior
            event.preventDefault();

            // Get the legal issue input from the form
            var legalIssue = $('#legal-issue').val();

            // Call the server-side API to get the case facts and advice
            $.ajax({
                type: 'POST',
                url: '/get_advice',
                data: { legal_issue: legalIssue },
                success: function(response) {
                    // Check if the response is in the expected format
                    if (response && response.top_case_facts && Array.isArray(response.top_case_facts) && response.top_advice && Array.isArray(response.top_advice)) {
                    // Build the case facts and advice HTML string
                        var caseFactsHtml = '';
                        var adviceHtml = '';
                        for (var i = 0; i < response.top_case_facts.length; i++) {
                            caseFactsHtml += '<p>Case Fact ' + (i+1) + ': ' + response.top_case_facts[i] + '</p>';
                            adviceHtml += '<p>Advice ' + (i+1) + ': ' + response.top_advice[i] + '</p>';
                        }

                    // Display the case facts and advice in the advice container
                    $('#advice-container').html(caseFactsHtml + adviceHtml);
                    } else {
                    // Display an error message if the response is in an unexpected format
                    $('#advice-container').html('An unexpected error occurred.');
                    }
                },
                error: function(xhr, status, error) {
                    // Handle any errors that occur during the AJAX request
                    $('#advice-container').html('An error occurred: ' + error);
                }
            });
        });
    });
	</script>
</body>
</html>